<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®€å•æ¸¸æˆå¯åŠ¨æµ‹è¯•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body class="bg-gray-100 dark:bg-gray-900 min-h-screen p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8 text-gray-900 dark:text-white">
            ğŸ® ç®€å•æ¸¸æˆå¯åŠ¨æµ‹è¯•
        </h1>
        
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">åŸºç¡€æ£€æŸ¥</h2>
            <div id="basic-checks" class="space-y-2 text-sm">
                <div>æ­£åœ¨æ£€æŸ¥...</div>
            </div>
        </div>
        
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">æ¸¸æˆå¯åŠ¨æµ‹è¯•</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                <button onclick="testStartGame('tetris')" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors">
                    æµ‹è¯•ä¿„ç½—æ–¯æ–¹å—
                </button>
                <button onclick="testStartGame('snake')" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded transition-colors">
                    æµ‹è¯•è´ªåƒè›‡
                </button>
                <button onclick="testStartGame('puzzle')" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded transition-colors">
                    æµ‹è¯•æ•°å­—åå®¹é“
                </button>
                <button onclick="testStartGame('flappy')" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded transition-colors">
                    æµ‹è¯•é£ç¿”å°é¸Ÿ
                </button>
            </div>
            <div id="test-results" class="text-sm space-y-1"></div>
        </div>
        
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">ç›´æ¥æ¸¸æˆå¯åŠ¨</h2>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ç›´æ¥å¯åŠ¨æ¸¸æˆï¼ˆå®é™…è·³è½¬ï¼‰ï¼š</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <button onclick="window.startGame('tetris')" class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded transition-colors">
                    â–¶ï¸ ä¿„ç½—æ–¯æ–¹å—
                </button>
                <button onclick="window.startGame('snake')" class="bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded transition-colors">
                    â–¶ï¸ è´ªåƒè›‡
                </button>
                <button onclick="window.startGame('puzzle')" class="bg-violet-500 hover:bg-violet-600 text-white px-4 py-2 rounded transition-colors">
                    â–¶ï¸ æ•°å­—åå®¹é“
                </button>
                <button onclick="window.startGame('flappy')" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded transition-colors">
                    â–¶ï¸ é£ç¿”å°é¸Ÿ
                </button>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script>
        // åŸºç¡€æ£€æŸ¥å‡½æ•°
        function runBasicChecks() {
            const checksContainer = document.getElementById('basic-checks');
            const checks = [];
            
            // æ£€æŸ¥main.jsæ˜¯å¦åŠ è½½
            checks.push({
                name: 'main.jsåŠ è½½',
                status: typeof allGames !== 'undefined' ? 'âœ…' : 'âŒ',
                detail: typeof allGames !== 'undefined' ? `å·²åŠ è½½ï¼ŒåŒ…å«${allGames.length}ä¸ªæ¸¸æˆ` : 'æœªåŠ è½½'
            });
            
            // æ£€æŸ¥startGameå‡½æ•°
            checks.push({
                name: 'startGameå‡½æ•°',
                status: typeof startGame === 'function' ? 'âœ…' : 'âŒ',
                detail: typeof startGame === 'function' ? 'å‡½æ•°å·²å®šä¹‰' : 'å‡½æ•°æœªå®šä¹‰'
            });
            
            // æ£€æŸ¥generateGameCardå‡½æ•°
            checks.push({
                name: 'generateGameCardå‡½æ•°',
                status: typeof generateGameCard === 'function' ? 'âœ…' : 'âŒ',
                detail: typeof generateGameCard === 'function' ? 'å‡½æ•°å·²å®šä¹‰' : 'å‡½æ•°æœªå®šä¹‰'
            });
            
            // æ£€æŸ¥RecentGamesManager
            checks.push({
                name: 'RecentGamesManager',
                status: typeof RecentGamesManager !== 'undefined' ? 'âœ…' : 'âŒ',
                detail: typeof RecentGamesManager !== 'undefined' ? 'ç®¡ç†å™¨å·²å®šä¹‰' : 'ç®¡ç†å™¨æœªå®šä¹‰'
            });
            
            checksContainer.innerHTML = checks.map(check => 
                `<div class="flex justify-between">
                    <span>${check.status} ${check.name}</span>
                    <span class="text-gray-500">${check.detail}</span>
                </div>`
            ).join('');
        }
        
        // æµ‹è¯•æ¸¸æˆå¯åŠ¨å‡½æ•°
        function testStartGame(gameId) {
            const resultsContainer = document.getElementById('test-results');
            const timestamp = new Date().toLocaleTimeString();
            
            try {
                if (typeof startGame !== 'function') {
                    throw new Error('startGameå‡½æ•°ä¸å­˜åœ¨');
                }
                
                // åˆ›å»ºä¸€ä¸ªå®‰å…¨çš„æµ‹è¯•ç¯å¢ƒ
                const originalHref = window.location.href;
                let jumpUrl = null;
                
                // åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿçš„startGameå‡½æ•°æ¥æµ‹è¯•
                const testStartGameFunction = function(gameId) {
                    console.log('æµ‹è¯•startGameè¢«è°ƒç”¨ï¼Œæ¸¸æˆID:', gameId);
                    
                    // æ¨¡æ‹ŸåŸå‡½æ•°çš„é€»è¾‘
                    if (typeof RecentGamesManager !== 'undefined') {
                        // ä¸å®é™…è®°å½•ï¼Œåªæµ‹è¯•æ˜¯å¦å¯ä»¥è°ƒç”¨
                        console.log('RecentGamesManagerå¯ç”¨');
                    }
                    
                    // æ¨¡æ‹Ÿè·³è½¬URLç”Ÿæˆ
                    jumpUrl = `game.html?game=${gameId}`;
                    console.log('åº”è¯¥è·³è½¬åˆ°:', jumpUrl);
                    
                    return jumpUrl;
                };
                
                const result = testStartGameFunction(gameId);
                
                if (result) {
                    resultsContainer.innerHTML += `
                        <div class="text-green-600 dark:text-green-400">
                            [${timestamp}] âœ… ${gameId} æµ‹è¯•æˆåŠŸ - åº”è·³è½¬åˆ°: ${result}
                        </div>
                    `;
                } else {
                    resultsContainer.innerHTML += `
                        <div class="text-red-600 dark:text-red-400">
                            [${timestamp}] âŒ ${gameId} æµ‹è¯•å¤±è´¥ - æœªç”Ÿæˆè·³è½¬URL
                        </div>
                    `;
                }
                
            } catch (error) {
                resultsContainer.innerHTML += `
                    <div class="text-red-600 dark:text-red-400">
                        [${timestamp}] âŒ ${gameId} æµ‹è¯•å‡ºé”™: ${error.message}
                    </div>
                `;
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè¿è¡Œæ£€æŸ¥
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(runBasicChecks, 500); // å»¶è¿Ÿ500msç¡®ä¿main.jså®Œå…¨åŠ è½½
        });
    </script>
</body>
</html> 